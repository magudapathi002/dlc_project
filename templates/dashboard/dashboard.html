{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard - {{ user.username }}{% endblock %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<style>
    /* Custom Scrollbar (Still used for top cards or fallback) */
    .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #0B1221; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #22d3ee; }

    /* --- HIGH ENERGY ENTRANCE ANIMATION  --- */
    @keyframes popIn {
        0% { opacity: 0; transform: scale(0.9) translateY(30px); }
        70% { transform: scale(1.02) translateY(-5px); }
        100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    .animate-pop-in {
        opacity: 0;
        animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    .delay-500 { animation-delay: 0.5s; }
    .delay-600 { animation-delay: 0.6s; }

    /* --- GLASS / GLOW CARD STYLES --- */
    .neon-card {
        background: linear-gradient(145deg, #0B1221, #0f172a);
        border: 1px solid rgba(34, 211, 238, 0.2);
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .neon-card:hover {
        transform: translateY(-8px) scale(1.01);
        border-color: rgba(34, 211, 238, 0.8);
        box-shadow: 0 0 30px rgba(6, 182, 212, 0.25), inset 0 0 20px rgba(6, 182, 212, 0.05);
        z-index: 10;
    }

    /* Variant for the Purple Chart */
    .neon-card.purple-theme {
        border: 1px solid rgba(168, 85, 247, 0.2);
    }
    .neon-card.purple-theme:hover {
        border-color: rgba(168, 85, 247, 0.8);
        box-shadow: 0 0 30px rgba(168, 85, 247, 0.25), inset 0 0 20px rgba(168, 85, 247, 0.05);
    }

    /* Variant for the Blue Chart */
    .neon-card.blue-theme {
        border: 1px solid rgba(96, 165, 250, 0.2);
    }
    .neon-card.blue-theme:hover {
        border-color: rgba(96, 165, 250, 0.8);
        box-shadow: 0 0 30px rgba(96, 165, 250, 0.25), inset 0 0 20px rgba(96, 165, 250, 0.05);
    }
</style>

<div class="max-w-8xl -mt-10 px-4 sm:px-6 lg:px-8">

  {# Header #}
  <div class="flex items-center justify-between mb-6 pt-4 animate-pop-in">
    <div>
      <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-emerald-400 drop-shadow-sm">
        Dashboard
      </h1>
      <p class="text-sm text-slate-400 mt-1">
        Welcome back, <span class="text-slate-500 font-semibold">{{ user.get_full_name|default:user.username }}</span>
      </p>
    </div>
  </div>

  {# --- ROW 1: SUMMARY CARDS (Unchanged) --- #}
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    {# Card 1: Tamil Nadu #}
    <div class="neon-card rounded-xl overflow-hidden h-96 animate-pop-in delay-100 group">
      <div class="flex items-center justify-between bg-slate-900/50 backdrop-blur-md px-5 py-4 border-b border-slate-700/50">
        <h2 class="font-bold text-lg text-slate-100 tracking-wide group-hover:text-cyan-400 transition-colors">Tamil Nadu Summary</h2>
        <div class="flex items-center gap-4 text-slate-500 group-hover:text-cyan-400 transition-colors">
          <button class="hover:text-white transition-transform hover:rotate-180 duration-500"><i class="fas fa-sync-alt"></i></button>
          <button class="hover:text-white transition-transform hover:scale-125 duration-300"><i class="fas fa-expand"></i></button>
        </div>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead>
            <tr class="bg-slate-900/30 border-b border-slate-800">
              <th class="px-5 py-3 text-left font-bold text-slate-500 uppercase text-xs">Slot #</th>
              <th class="px-5 py-3 text-left font-bold text-slate-500 uppercase text-xs">DateTime</th>
              <th class="px-5 py-3 text-left font-bold text-cyan-400 uppercase text-xs">MW</th>
            </tr>
          </thead>
          <tbody class="text-slate-300 divide-y divide-slate-800/50"></tbody>
        </table>
      </div>
    </div>

    {# Card 2: Region Wise #}
    <div class="neon-card rounded-xl overflow-hidden h-96 animate-pop-in delay-200 group">
      <div class="flex items-center justify-between bg-slate-900/50 backdrop-blur-md px-5 py-4 border-b border-slate-700/50">
        <h2 class="font-bold text-lg text-slate-100 tracking-wide group-hover:text-cyan-400 transition-colors">Summary Region Wise</h2>
        <div class="flex items-center gap-4 text-slate-500 group-hover:text-cyan-400 transition-colors">
            <button class="hover:text-white transition-transform hover:rotate-180 duration-500"><i class="fas fa-sync-alt"></i></button>
            <button class="hover:text-white transition-transform hover:scale-125 duration-300"><i class="fas fa-expand"></i></button>
        </div>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead>
            <tr class="bg-slate-900/30 border-b border-slate-800">
              <th class="px-5 py-3 text-left font-bold text-cyan-500 uppercase text-xs">Slot #</th>
              <th class="px-5 py-3 text-left font-bold text-slate-500 uppercase text-xs">DateTime</th>
              <th class="px-5 py-3 text-left font-bold text-slate-500 uppercase text-xs">Madurai</th>
              <th class="px-5 py-3 text-left font-bold text-slate-500 uppercase text-xs">Erode</th>
              <th class="px-5 py-3 text-left font-bold text-emerald-400 uppercase text-xs">Total</th>
            </tr>
          </thead>
          <tbody class="text-slate-300 divide-y divide-slate-800/50"></tbody>
        </table>
      </div>
    </div>

    {# Card 3: Substation Forecast #}
    <div class="neon-card rounded-xl overflow-hidden flex flex-col h-96 animate-pop-in delay-300 group">
      <div class="flex items-center justify-between bg-slate-900/50 backdrop-blur-md px-5 py-4 border-b border-slate-700/50 shrink-0">
        <h2 class="font-bold text-lg text-slate-100 tracking-wide group-hover:text-cyan-400 transition-colors">Substation Forecast</h2>
        <div class="flex items-center gap-4 text-slate-500 group-hover:text-cyan-400 transition-colors">
            <button class="hover:text-white transition-transform hover:rotate-180 duration-500"><i class="fas fa-sync-alt"></i></button>
            <button class="hover:text-white transition-transform hover:scale-125 duration-300"><i class="fas fa-expand"></i></button>
        </div>
      </div>
      <div class="flex-1 overflow-y-auto custom-scrollbar">
        <table class="min-w-full text-sm">
          <thead class="sticky top-0 z-10">
            <tr class="bg-[#0f172a] border-b border-slate-700 shadow-lg">
              <th class="px-5 py-3 text-left font-bold text-slate-400 uppercase text-xs">Sub Station</th>
              <th class="px-5 py-3 text-left font-bold text-cyan-500 uppercase text-xs">Wind(m/s)</th>
              <th class="px-5 py-3 text-left font-bold text-emerald-400 uppercase text-xs">Power(MW)</th>
            </tr>
          </thead>
          <tbody class="text-slate-300 divide-y divide-slate-800/50">
            {# ... (Keeping your existing table rows here) ... #}
            <tr class="hover:bg-slate-800/60 transition-colors group/row">
                <td class="px-5 py-3 font-medium text-slate-300 group-hover/row:text-white">Substation 1</td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="wind-spark-1" class="w-20 h-8 opacity-80 group-hover/row:opacity-100"></div><span class="text-cyan-400 font-bold font-mono">6.44</span></div></td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="power-spark-1" class="w-20 h-8 opacity-80 group-hover/row:opacity-100"></div><span class="text-emerald-400 font-bold font-mono">585.92</span></div></td>
            </tr>
            <tr class="hover:bg-slate-800/60 transition-colors group/row">
                <td class="px-5 py-3 font-medium text-slate-300 group-hover/row:text-white">Substation 2</td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="wind-spark-2" class="w-20 h-8"></div><span class="text-cyan-400 font-bold font-mono">4.60</span></div></td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="power-spark-2" class="w-20 h-8"></div><span class="text-emerald-400 font-bold font-mono">719.95</span></div></td>
            </tr>
            <tr class="hover:bg-slate-800/60 transition-colors group/row">
                <td class="px-5 py-3 font-medium text-slate-300 group-hover/row:text-white">Substation 3</td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="wind-spark-3" class="w-20 h-8"></div><span class="text-cyan-400 font-bold font-mono">3.60</span></div></td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="power-spark-3" class="w-20 h-8"></div><span class="text-emerald-400 font-bold font-mono">53.80</span></div></td>
            </tr>
            <tr class="hover:bg-slate-800/60 transition-colors group/row">
                <td class="px-5 py-3 font-medium text-slate-300 group-hover/row:text-white">Substation 4</td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="wind-spark-4" class="w-20 h-8"></div><span class="text-cyan-400 font-bold font-mono">5.20</span></div></td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="power-spark-4" class="w-20 h-8"></div><span class="text-emerald-400 font-bold font-mono">120.40</span></div></td>
            </tr>
            <tr class="hover:bg-slate-800/60 transition-colors group/row">
                <td class="px-5 py-3 font-medium text-slate-300 group-hover/row:text-white">Substation 5</td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="wind-spark-5" class="w-20 h-8"></div><span class="text-cyan-400 font-bold font-mono">4.10</span></div></td>
                <td class="px-5 py-3"><div class="flex items-center gap-2"><div id="power-spark-5" class="w-20 h-8"></div><span class="text-emerald-400 font-bold font-mono">98.20</span></div></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  {# --- ROW 2: MAIN CHARTS --- #}
  <div class="grid grid-cols-1 gap-8 mb-10">

      {# Chart 1: Wind Power (Cyan Theme) #}
      <div class="neon-card rounded-xl p-2 md:p-6 animate-pop-in delay-500 relative">
          <div class="flex items-center justify-between mb-4 px-2">
              <div class="w-6"></div>
              <h2 class="text-slate-200 font-semibold text-sm md:text-xl tracking-wide flex items-center gap-2">
                  <span class="w-2 h-2 rounded-full bg-cyan-400 animate-pulse"></span>
                  Tamil Nadu Wind Forecast
              </h2>
              <button class="w-6 h-6 bg-white flex items-center justify-center rounded hover:bg-white-100 transition-all text-slate-400 hover:text-cyan-400 hover:rotate-90">
                <img src="{% static 'images/menu.png' %}" alt="Menu" class="w-5 h-5 object-contain">
            </button>
          </div>
          <div class="relative w-full pr-0 md:pr-4">
              <div id="windChart"></div>
          </div>
      </div>

  </div>


      {# Chart 2: Solar/Other Power (Purple Theme) #}
      <div class="neon-card purple-theme rounded-xl p-2 md:p-6 animate-pop-in delay-600 relative">
        <div class="flex items-center justify-between mb-4 px-2">
            <div class="w-6"></div>
            <h2 class="text-slate-200 font-semibold text-sm md:text-xl tracking-wide flex items-center gap-2">
                <span class="w-2 h-2 rounded-full bg-purple-500 animate-pulse"></span>
                Other Power Forecast
            </h2>
            <button class="w-6 h-6 bg-white flex items-center justify-center rounded hover:bg-white-100 transition-all text-slate-400 hover:text-cyan-400 hover:rotate-90">
                <img src="{% static 'images/menu.png' %}" alt="Menu" class="w-5 h-5 object-contain">
            </button>
        </div>
        <div class="relative w-full pr-0 md:pr-4">
            <div id="secondChart"></div>
        </div>
      </div>

  {# --- ROW 3: FORECAST TABLES (UPDATED: h-auto to show full data) --- #}
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-8 mt-10">

    {# --- CARD 1: TAMIL NADU --- #}
    <div class="neon-card rounded-xl overflow-hidden flex flex-col h-auto animate-pop-in delay-100 group">
      {# --- LOGO FIXED HEADER --- #}
      <div class="bg-[#0f172a] p-4 flex items-center gap-4 border-b border-slate-800 select-none">
         <div class="w-full h-14 shrink-0 flex items-center justify-center bg-slate-900 rounded-lg border border-slate-700">
            <img src="{% static 'images/logo.png' %}" alt="Logo" class="w-full h-full object-contain p-1">
         </div>
      </div>

      {# Green Sub-Header #}
      <div class="bg-emerald-900/80 border-y border-emerald-500/30 py-1 text-center backdrop-blur-sm">
          <span class="text-emerald-100 font-bold text-xs uppercase tracking-wide">Tamil Nadu Wind Energy Forecast</span>
      </div>

      {# Table Container - Removed overflow-auto and fixed height #}
      <div class="bg-[#0B1221]">
        <table class="w-full border-collapse text-center">
          <thead class="sticky top-0 z-10 bg-slate-800 text-slate-300 text-[10px] uppercase font-bold shadow-md">
            <tr>
              <th class="p-2 border border-slate-700 min-w-[50px]">Time</th>
              {% for i in "12345678" %}<th class="p-2 border border-slate-700 min-w-[50px]">Date {{ i }}</th>{% endfor %}
            </tr>
          </thead>
          <tbody class="text-[11px] text-slate-400 font-mono">
             {% for i in "012345678901234567890123"|make_list %}
             <tr class="hover:bg-slate-800/50 transition-colors">
                 <td class="p-1 border border-slate-800 bg-slate-900/50 text-cyan-500 font-bold">{{ forloop.counter }}:00</td>
                 {% for x in "12345678" %}<td class="p-1 border border-slate-800 hover:bg-cyan-900/20 cursor-crosshair transition-colors"></td>{% endfor %}
             </tr>
             {% endfor %}
             <tr class="bg-slate-800 font-bold text-white sticky bottom-0 z-10">
                 <td class="p-2 border border-slate-700">Total</td>
                 <td class="p-2 border border-slate-700" colspan="8">--</td>
             </tr>
          </tbody>
        </table>
      </div>
    </div>

    {# --- CARD 2: MADURAI --- #}
    <div class="neon-card purple-theme rounded-xl overflow-hidden flex flex-col h-auto animate-pop-in delay-200 group">
      {# --- LOGO FIXED HEADER --- #}
      <div class="bg-[#0f172a] p-4 flex items-center gap-4 border-b border-slate-800 select-none">
         <div class="w-full  h-14 shrink-0 flex items-center justify-center bg-slate-900 rounded-lg border border-slate-700">
            <img src="{% static 'images/logo.png' %}" alt="Logo" class="w-full h-full object-contain p-1">
         </div>
      </div>

      {# Purple Sub-Header #}
      <div class="bg-purple-900/60 border-y border-purple-500/30 py-1 text-center backdrop-blur-sm">
          <span class="text-purple-100 font-bold text-xs uppercase tracking-wide">Madurai LDC Wind Forecast</span>
      </div>
      {# Table Container - Removed overflow-auto and fixed height #}
      <div class="bg-[#0B1221]">
        <table class="w-full border-collapse text-center">
          <thead class="sticky top-0 z-10 bg-slate-800 text-slate-300 text-[10px] uppercase font-bold shadow-md">
            <tr>
              <th class="p-2 border border-slate-700 min-w-[50px]">Time</th>
              {% for i in "12345678" %}<th class="p-2 border border-slate-700 min-w-[50px]">Date {{ i }}</th>{% endfor %}
            </tr>
          </thead>
          <tbody class="text-[11px] text-slate-400 font-mono">
             {% for i in "012345678901234567890123"|make_list %}
             <tr class="hover:bg-slate-800/50 transition-colors">
                 <td class="p-1 border border-slate-800 bg-slate-900/50 text-purple-400 font-bold">{{ forloop.counter }}:00</td>
                 {% for x in "12345678" %}<td class="p-1 border border-slate-800 hover:bg-purple-900/20 transition-colors"></td>{% endfor %}
             </tr>
             {% endfor %}
             <tr class="bg-slate-800 font-bold text-white sticky bottom-0 z-10">
                 <td class="p-2 border border-slate-700">Total</td>
                 <td class="p-2 border border-slate-700" colspan="8">--</td>
             </tr>
          </tbody>
        </table>
      </div>
    </div>

    {# --- CARD 3: ERODE --- #}
    <div class="neon-card blue-theme rounded-xl overflow-hidden flex flex-col h-auto animate-pop-in delay-300 group">
      {# --- LOGO FIXED HEADER --- #}
      <div class="bg-[#0f172a] p-4 flex items-center gap-4 border-b border-slate-800 select-none">
         <div class="w-full h-14 shrink-0 flex items-center justify-center bg-slate-900 rounded-lg border border-slate-700">
            <img src="{% static 'images/logo.png' %}" alt="Logo" class="w-full h-full object-contain p-1">
         </div>
      </div>

      {# Blue Sub-Header #}
      <div class="bg-blue-900/60 border-y border-blue-500/30 py-1 text-center backdrop-blur-sm">
          <span class="text-blue-100 font-bold text-xs uppercase tracking-wide">Erode LDC Wind Forecast</span>
      </div>
      {# Table Container - Removed overflow-auto and fixed height #}
      <div class="bg-[#0B1221]">
        <table class="w-full border-collapse text-center">
          <thead class="sticky top-0 z-10 bg-slate-800 text-slate-300 text-[10px] uppercase font-bold shadow-md">
            <tr>
              <th class="p-2 border border-slate-700 min-w-[50px]">Time</th>
              {% for i in "12345678" %}<th class="p-2 border border-slate-700 min-w-[50px]">Date {{ i }}</th>{% endfor %}
            </tr>
          </thead>
          <tbody class="text-[11px] text-slate-400 font-mono">
             {% for i in "012345678901234567890123"|make_list %}
             <tr class="hover:bg-slate-800/50 transition-colors">
                 <td class="p-1 border border-slate-800 bg-slate-900/50 text-blue-400 font-bold">{{ forloop.counter }}:00</td>
                 {% for x in "12345678" %}<td class="p-1 border border-slate-800 hover:bg-blue-900/20 transition-colors"></td>{% endfor %}
             </tr>
             {% endfor %}
             <tr class="bg-slate-800 font-bold text-white sticky bottom-0 z-10">
                 <td class="p-2 border border-slate-700">Total</td>
                 <td class="p-2 border border-slate-700" colspan="8">--</td>
             </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {

        // --- 1. Main Chart 1 (Wind - Cyan) ---
        const dataValues = [430, 620, 560, 470, 680, 340, 300, 260, 280, 260, 250, 120, 130, 150, 140, 120, 120, 125, 130, 140, 160, 180, 220, 320];

        // Shared Base Options
        const baseOptions = {
            chart: {
                type: 'area',
                height: 350,
                toolbar: { show: false },
                background: 'transparent',
                fontFamily: 'ui-sans-serif, system-ui, sans-serif',
                animations: {
                    enabled: true,
                    easing: 'easeinout',
                    speed: 800,
                    animateGradually: { enabled: true, delay: 150 },
                    dynamicAnimation: { enabled: true, speed: 350 }
                }
            },
            stroke: { curve: 'smooth', width: 3 },
            xaxis: {
                categories: Array.from({length: 24}, (_, i) => i + 1),
                tooltip: { enabled: false },
                axisBorder: { show: false },
                axisTicks: { show: false },
                labels: { style: { colors: '#64748b', fontSize: '12px' } }
            },
            yaxis: {
                min: 0, max: 800, tickAmount: 4,
                labels: { style: { colors: '#64748b' } },
            },
            grid: { borderColor: '#1e293b', strokeDashArray: 4, yaxis: { lines: { show: true } }, xaxis: { lines: { show: false } } },
            tooltip: { theme: 'dark', style: { fontSize: '12px' }, x: { show: false }, marker: { show: true } },
            legend: { show: false }
        };

        // Render Chart 1
        var options1 = {
            ...baseOptions,
            series: [{ name: 'Wind MW', data: dataValues }],
            colors: ['#22d3ee'], // Cyan
            fill: {
                type: 'gradient',
                gradient: {
                    shadeIntensity: 1, opacityFrom: 0.6, opacityTo: 0.0, stops: [0, 100],
                    colorStops: [{ offset: 0, color: '#22d3ee', opacity: 0.5 }, { offset: 100, color: '#22d3ee', opacity: 0 }]
                }
            },
            markers: { size: 0, colors: ['#0f172a'], strokeColors: '#22d3ee', strokeWidth: 2, hover: { size: 6 } },
        };
        new ApexCharts(document.querySelector("#windChart"), options1).render();


        // --- 2. Main Chart 2 (Multi-Value: Purple/Pink Theme) ---
        // Define your data arrays
        const solarData = [100, 150, 200, 280, 450, 600, 750, 800, 780, 700, 600, 500, 400, 300, 200, 100, 50, 20, 10, 5, 0, 0, 0, 0];
        const hydroData = [300, 310, 305, 300, 290, 280, 400, 450, 500, 550, 520, 480, 460, 440, 420, 410, 400, 390, 380, 370, 360, 350, 340, 330];
        const windData = [500, 500, 600, 574, 575, 855, 852, 200, 100, 50, 966, 480, 460, 440, 420, 410, 400, 390, 380, 370, 360, 350, 340, 330];

        var options2 = {
            // Include base options (animations, layout, etc.)
            ...baseOptions,

            // --- 1. HERE IS WHERE YOU ADD MULTIPLE VALUES ---
            series: [
                {
                    name: 'Solar MW',
                    data: solarData
                },
                {
                    name: 'Hydro MW',
                    data: hydroData
                },
                {
                    name:'Wind MW',
                    data: windData
                }
            ],

            // --- 2. ADD COLORS FOR EACH LINE ---
            // Color 1: Purple (matches card), Color 2: Fuchsia/Pink (high contrast neon)
            colors: ['#a855f7', '#d946ef'],

            fill: {
                type: 'gradient',
                gradient: {
                    shadeIntensity: 1,
                    opacityFrom: 0.5,
                    opacityTo: 0.05,
                    stops: [0, 100],
                    // Apply gradient to both colors automatically
                }
            },

            // Customize markers to match their specific line colors
            markers: {
                size: 0,
                colors: ['#0f172a'], // Dark center
                strokeWidth: 2,
                hover: { size: 6 }
            },

            // Optional: Customize legend if you want to see the names
            legend: {
                show: true,
                position: 'top',
                horizontalAlign: 'right',
                labels: { colors: '#cbd5e1' }, // Light text
                itemMargin: { horizontal: 10, vertical: 0 }
            }
        };

        new ApexCharts(document.querySelector("#secondChart"), options2).render();


        // --- 3. Sparklines (Existing) ---
        const commonSpark = {
            chart: { type: 'area', height: 35, width: 80, sparkline: { enabled: true }, animations: { enabled: true } },
            fill: { type: 'gradient', gradient: { shadeIntensity: 1, opacityFrom: 0.4, opacityTo: 0, stops: [0, 100] } },
            tooltip: { enabled: false }
        };

        // Wind (Cyan)
        const windConf = { ...commonSpark, stroke: { curve: 'smooth', width: 2, colors: ['#22d3ee'] } };
        // Power (Emerald)
        const powerConf = { ...commonSpark, stroke: { curve: 'smooth', width: 2, colors: ['#34d399'] }, fill: { ...commonSpark.fill, gradient: { ...commonSpark.fill.gradient, colorStops: [{offset: 0, color:'#34d399', opacity:0.4}, {offset:100, color:'#34d399', opacity:0}] } } };

        // Render dummy sparklines
        new ApexCharts(document.querySelector("#wind-spark-1"), { ...windConf, series: [{ data: [5, 8, 6, 9, 7, 8, 6] }] }).render();
        new ApexCharts(document.querySelector("#power-spark-1"), { ...powerConf, series: [{ data: [500, 520, 550, 580, 560, 585, 590] }] }).render();
        new ApexCharts(document.querySelector("#wind-spark-2"), { ...windConf, series: [{ data: [2, 3, 4, 3, 4, 5, 4] }] }).render();
        new ApexCharts(document.querySelector("#power-spark-2"), { ...powerConf, series: [{ data: [600, 650, 620, 680, 700, 710, 720] }] }).render();
        new ApexCharts(document.querySelector("#wind-spark-3"), { ...windConf, series: [{ data: [4, 3, 5, 2, 3, 2, 3] }] }).render();
        new ApexCharts(document.querySelector("#power-spark-3"), { ...powerConf, series: [{ data: [40, 45, 42, 50, 48, 52, 53] }] }).render();
        new ApexCharts(document.querySelector("#wind-spark-4"), { ...windConf, series: [{ data: [3, 4, 5, 4, 6, 5, 6] }] }).render();
        new ApexCharts(document.querySelector("#power-spark-4"), { ...powerConf, series: [{ data: [100, 110, 105, 120, 115, 125, 130] }] }).render();
        new ApexCharts(document.querySelector("#wind-spark-5"), { ...windConf, series: [{ data: [2, 3, 2, 4, 3, 5, 4] }] }).render();
        new ApexCharts(document.querySelector("#power-spark-5"), { ...powerConf, series: [{ data: [80, 85, 90, 88, 92, 95, 98] }] }).render();

        // --- 4. Tooltip CSS ---
        const style = document.createElement('style');
        style.innerHTML = `
            .apexcharts-tooltip {
                background: #0f172a !important;
                border: 1px solid #334155 !important;
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.5) !important;
                color: #fff;
                border-radius: 8px !important;
            }
            .apexcharts-tooltip-title {
                background: #1e293b !important;
                border-bottom: 1px solid #334155 !important;
                font-family: ui-sans-serif, system-ui !important;
            }
            .apexcharts-tooltip-text-value, .apexcharts-tooltip-text-z-value {
                font-weight: bold;
            }
        `;
        document.head.appendChild(style);
    });
</script>
{% endblock %}